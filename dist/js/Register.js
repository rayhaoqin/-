"use strict";document.addEventListener("DOMContentLoaded",function(){var t=[200,304],l=document.querySelector("#uname"),o=document.querySelector("#upwd"),e=document.querySelector("#upwds"),n=document.querySelector("#btn"),i=document.querySelector("#show"),r=(document.querySelector("#ty"),!1),u=!1,c=!1;function s(){n.disabled=!(r&&u&&c)}l.onblur=function(){var e=l.value;if(console.log(l.value),/^[\D\S][\S]{5,11}$/.test(e)){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState&&-1!=t.indexOf(n.status)){var e=n.responseText;console.log(e),r=e?(i.innerHTML="用户名可用",i.style.color="#58bc58",!0):(i.innerHTML="用户名重复",!(i.style.color="red"))}},n.open("get","../php/yanzheng.php?uname="+e),n.send(null)}else l.nextElementSibling.innerHTML="不能为空，限制6-12位",l.nextElementSibling.style.color="red",l.nextElementSibling.style.fontSize="14px",r=!1;s()},o.onblur=function(){u=/^[a-z]\w{5,11}$/.test(o.value)?(o.nextElementSibling.innerHTML="密码格式正确",o.nextElementSibling.style.color="#58bc58",!0):(o.nextElementSibling.innerHTML="密码应以字母开头，6-12位",o.nextElementSibling.style.color="red",!(o.nextElementSibling.style.fontSize="14px")),s()},e.onblur=function(){c=e.value==o.value?(e.nextElementSibling.innerHTML="密码一致",e.nextElementSibling.style.color="#58bc58",!0):(e.nextElementSibling.innerHTML="2次密码必须输入一致",e.nextElementSibling.style.color="red",!(e.nextElementSibling.style.fontSize="14px")),s()},n.onclick=function(e){e.preventDefault();var n=new XMLHttpRequest;n.onreadystatechange=function(){4==n.readyState&&-1!=t.indexOf(n.status)&&(console.log(n.responseText),"注册成功"==n.responseText&&(location.href="Login.html"))},n.open("post","../php/Register.php"),n.setRequestHeader("content-type","application/x-www-form-urlencoded"),n.send("uname="+l.value+"&upwd="+o.value)}});